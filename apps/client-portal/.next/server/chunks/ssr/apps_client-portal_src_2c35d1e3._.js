module.exports=[66338,a=>{"use strict";async function b(a){let b=await a.json().catch(()=>({}));if(!a.ok)throw Error("string"==typeof b?.error?b.error:"string"==typeof b?.details?b.details:`Request failed (${a.status})`);return b}async function c(){let a=await fetch("/api/portal/workspaces",{method:"GET",cache:"no-store",credentials:"include"}),c=await b(a);return Array.isArray(c)?c:Array.isArray(c?.workspaces)?c.workspaces:Array.isArray(c?.jobs)?c.jobs:[]}async function d(a){return b(await fetch(`/api/portal/workspaces/${a}/intake`,{method:"GET",cache:"no-store",credentials:"include"}))}async function e(a,c){return b(await fetch(`/api/portal/workspaces/${a}/intake/suggest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c),credentials:"include"}))}async function f(a,c){return b(await fetch(`/api/portal/workspaces/${a}/intake`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c),credentials:"include"}))}async function g(a){let c=await fetch(`/api/research-jobs/${a}/runtime/threads`,{method:"GET",cache:"no-store",credentials:"include"}),d=await b(c);return Array.isArray(d.threads)?d.threads:[]}async function h(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/threads`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c),credentials:"include"}))}async function i(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/threads/${c}/branches`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(d),credentials:"include"}))}async function j(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/threads/${c}/pin-branch`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({branchId:d}),credentials:"include"}))}async function k(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/messages?limit=300`,{method:"GET",cache:"no-store",credentials:"include"}))}async function l(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/events?limit=150`,{method:"GET",cache:"no-store",credentials:"include"}))}async function m(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/queue`,{method:"GET",cache:"no-store",credentials:"include"}))}async function n(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/state`,{method:"GET",cache:"no-store",credentials:"include"}))}async function o(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/messages`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(d),credentials:"include"}))}async function p(a,c,d="Interrupted by user"){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/interrupt`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reason:d}),credentials:"include"}))}async function q(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/queue/reorder`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:d}),credentials:"include"}))}async function r(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/queue/${d}`,{method:"DELETE",credentials:"include"}))}a.s(["cancelRuntimeQueueItem",()=>r,"createRuntimeBranch",()=>i,"createRuntimeThread",()=>h,"fetchRuntimeBranchState",()=>n,"fetchWorkspaceIntakeStatus",()=>d,"fetchWorkspaces",()=>c,"interruptRuntimeBranch",()=>p,"listRuntimeEvents",()=>l,"listRuntimeMessages",()=>k,"listRuntimeQueue",()=>m,"listRuntimeThreads",()=>g,"pinRuntimeBranch",()=>j,"reorderRuntimeQueue",()=>q,"sendRuntimeMessage",()=>o,"submitWorkspaceIntake",()=>f,"suggestWorkspaceIntakeCompletion",()=>e])},34293,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e({workspaces:a,loading:c=!1,error:e=null,onRetry:f}){return(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"bat-chip",children:"Workspace switcher"}),(0,b.jsx)("h1",{className:"mt-3 text-3xl md:text-4xl",style:{fontFamily:"var(--font-display)"},children:"Choose a client workspace"}),(0,b.jsx)("p",{className:"mt-2 text-sm",style:{color:"var(--bat-text-muted)"},children:"Chat is the default route after workspace selection."})]}),e?(0,b.jsxs)("div",{className:"rounded-2xl border p-4 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:[(0,b.jsxs)("p",{children:["Could not load workspaces: ",e]}),f?(0,b.jsx)("button",{type:"button",onClick:f,className:"mt-2 rounded-full border px-3 py-1.5 text-xs",style:{borderColor:"currentColor"},children:"Retry"}):null]}):null,(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[c&&0===a.length?(0,b.jsx)("article",{className:"bat-surface p-5",children:(0,b.jsx)("p",{className:"text-sm",style:{color:"var(--bat-text-muted)"},children:"Loading workspaces..."})}):null,c||0!==a.length?null:(0,b.jsx)("article",{className:"bat-surface p-5",children:(0,b.jsx)("p",{className:"text-sm",style:{color:"var(--bat-text-muted)"},children:"No workspaces were found yet."})}),a.map(a=>(0,b.jsxs)(d.default,{href:`/app/w/${a.id}`,className:"bat-surface block p-5 transition-transform hover:-translate-y-0.5",children:[(0,b.jsx)("p",{className:"text-lg font-semibold",children:a.name}),(0,b.jsxs)("p",{className:"mt-1 text-sm",style:{color:"var(--bat-text-muted)"},children:[a.members," members • ",a.plan]}),a.intakeReady?null:(0,b.jsx)("p",{className:"mt-2 text-xs uppercase tracking-[0.07em]",style:{color:"var(--bat-warning)"},children:"Setup needed before smart chat"}),a.status?(0,b.jsxs)("p",{className:"mt-1 text-xs uppercase tracking-[0.07em]",style:{color:"var(--bat-text-muted)"},children:["Status: ",a.status]}):null,(0,b.jsx)("p",{className:"mt-3 text-sm",style:{color:"var(--bat-accent)"},children:"Open Chat Workspace →"})]},a.id))]})]})}var f=a.i(66338);function g(a){let b=a.client?.name?.trim()||`Workspace ${a.id.slice(0,8)}`,c=a.intakeReady?"Ready":"Setup required";return{id:a.id,name:b,members:1,plan:c,status:a.status||"UNKNOWN",startedAt:a.startedAt||null,intakeReady:a.intakeReady??!1}}function h(){let[a,d]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)([]),l=(0,c.useCallback)(async()=>{d(!0),i(null);try{let a=await (0,f.fetchWorkspaces)();k(a)}catch(a){i(String(a?.message||"Failed to fetch workspaces"))}finally{d(!1)}},[]);(0,c.useEffect)(()=>{l()},[l]);let m=(0,c.useMemo)(()=>j.map(g),[j]);return(0,b.jsx)(e,{workspaces:m,loading:a,error:h,onRetry:l})}a.s(["default",()=>h],34293)}];

//# sourceMappingURL=apps_client-portal_src_2c35d1e3._.js.map