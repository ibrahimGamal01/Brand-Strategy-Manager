module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},6810,a=>{"use strict";async function b(a){let b=await a.json().catch(()=>({}));if(!a.ok)throw Error("string"==typeof b?.error?b.error:"string"==typeof b?.details?b.details:`Request failed (${a.status})`);return b}async function c(a){return b(await fetch("/api/portal/auth/signup",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}))}async function d(a){return b(await fetch("/api/portal/auth/login",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}))}async function e(){return b(await fetch("/api/portal/auth/logout",{method:"POST",credentials:"include"}))}async function f(){return b(await fetch("/api/portal/auth/me",{method:"GET",credentials:"include",cache:"no-store"}))}async function g(a){return b(await fetch(`/api/portal/auth/verify-email?token=${encodeURIComponent(a)}`,{method:"GET",credentials:"include",cache:"no-store"}))}a.s(["getPortalMe",()=>f,"loginPortal",()=>d,"logoutPortal",()=>e,"signupPortal",()=>c,"verifyPortalEmail",()=>g])},6705,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(50944),f=a.i(6810);function g(){let a=(0,e.useRouter)(),[g,h]=(0,d.useState)(""),[i,j]=(0,d.useState)(""),[k,l]=(0,d.useState)(""),[m,n]=(0,d.useState)(""),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(null),[s,t]=(0,d.useState)(!0),[u,v]=(0,d.useState)(null);(0,d.useEffect)(()=>{let b=!0;return(0,f.getPortalMe)().then(()=>{b&&a.replace("/app")}).catch(()=>void 0).finally(()=>{b&&t(!1)}),()=>{b=!1}},[a]);let w=async b=>{b.preventDefault(),r(null),v(null),p(!0);try{let b=await (0,f.signupPortal)({email:k,password:m,fullName:g,companyName:i});b.emailDelivery?.provider==="console"?v("Verification email is in console mode. Configure Resend to send real emails."):v("Verification email sent. Please confirm it from your inbox."),a.push("/app")}catch(b){let a=String(b?.message||"Sign up failed");a.includes("EMAIL_ALREADY_EXISTS")?r("An account with this email already exists."):a.includes("INVALID_EMAIL")?r("Please enter a valid email."):a.includes("INVALID_PASSWORD")?r("Password must be at least 8 characters."):r(a)}finally{p(!1)}};return s?(0,b.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,b.jsx)("div",{className:"bat-surface w-full max-w-md p-7 text-sm",style:{color:"var(--bat-text-muted)"},children:"Checking session..."})}):(0,b.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,b.jsxs)("div",{className:"bat-surface w-full max-w-md p-7",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Create your BAT workspace"}),(0,b.jsx)("p",{className:"mt-2 text-sm",style:{color:"var(--bat-text-muted)"},children:"Start free and launch onboarding directly in chat."}),q?(0,b.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:q}):null,u?(0,b.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"var(--bat-border)",background:"var(--bat-surface-muted)"},children:u}):null,(0,b.jsxs)("form",{className:"mt-6 space-y-3",onSubmit:w,children:[(0,b.jsxs)("label",{className:"block text-sm",children:["Full name",(0,b.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"text",value:g,onChange:a=>h(a.target.value),autoComplete:"name"})]}),(0,b.jsxs)("label",{className:"block text-sm",children:["Work email",(0,b.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"email",value:k,onChange:a=>l(a.target.value),required:!0,autoComplete:"email"})]}),(0,b.jsxs)("label",{className:"block text-sm",children:["Company name",(0,b.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"text",value:i,onChange:a=>j(a.target.value),autoComplete:"organization"})]}),(0,b.jsxs)("label",{className:"block text-sm",children:["Password",(0,b.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"password",value:m,onChange:a=>n(a.target.value),required:!0,autoComplete:"new-password",minLength:8})]}),(0,b.jsx)("button",{type:"submit",disabled:o,className:"w-full rounded-full px-4 py-2 text-sm font-semibold disabled:opacity-70",style:{background:"var(--bat-accent)",color:"white"},children:o?"Creating workspace...":"Create workspace"})]}),(0,b.jsxs)("p",{className:"mt-4 text-sm",style:{color:"var(--bat-text-muted)"},children:["Already onboarded? ",(0,b.jsx)(c.default,{href:"/login",children:"Log in"})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b0519ed2._.js.map