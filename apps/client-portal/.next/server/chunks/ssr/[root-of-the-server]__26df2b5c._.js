module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},6810,a=>{"use strict";async function b(a){let b=await a.json().catch(()=>({}));if(!a.ok)throw Error("string"==typeof b?.error?b.error:"string"==typeof b?.details?b.details:`Request failed (${a.status})`);return b}async function c(a){return b(await fetch("/api/portal/auth/signup",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}))}async function d(a){return b(await fetch("/api/portal/auth/login",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}))}async function e(){return b(await fetch("/api/portal/auth/logout",{method:"POST",credentials:"include"}))}async function f(){return b(await fetch("/api/portal/auth/me",{method:"GET",credentials:"include",cache:"no-store"}))}async function g(a){return b(await fetch(`/api/portal/auth/verify-email?token=${encodeURIComponent(a)}`,{method:"GET",credentials:"include",cache:"no-store"}))}a.s(["getPortalMe",()=>f,"loginPortal",()=>d,"logoutPortal",()=>e,"signupPortal",()=>c,"verifyPortalEmail",()=>g])},70166,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(50944),f=a.i(6810);function g(){let a=(0,e.useRouter)(),g=(0,e.useSearchParams)(),[h,i]=(0,d.useState)(""),[j,k]=(0,d.useState)(""),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(!0),r=g.get("next")||"/app",s=g.get("verified");(0,d.useEffect)(()=>{let b=!0;return(0,f.getPortalMe)().then(()=>{b&&a.replace("/app")}).catch(()=>void 0).finally(()=>{b&&q(!1)}),()=>{b=!1}},[a]);let t=async b=>{b.preventDefault(),o(null),m(!0);try{await (0,f.loginPortal)({email:h,password:j}),a.push(r)}catch(b){let a=String(b?.message||"Login failed");a.includes("INVALID_CREDENTIALS")?o("Invalid email or password."):o(a)}finally{m(!1)}};return p?(0,b.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,b.jsx)("div",{className:"bat-surface w-full max-w-md p-7 text-sm",style:{color:"var(--bat-text-muted)"},children:"Checking session..."})}):(0,b.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,b.jsxs)("div",{className:"bat-surface w-full max-w-md p-7",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Log in to BAT"}),(0,b.jsx)("p",{className:"mt-2 text-sm",style:{color:"var(--bat-text-muted)"},children:"Continue to your workspaces and live activity stream."}),s?(0,b.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"var(--bat-border)",background:"var(--bat-surface-muted)"},children:"Your email is verified. You can log in now."}):null,n?(0,b.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:n}):null,(0,b.jsxs)("form",{className:"mt-6 space-y-3",onSubmit:t,children:[(0,b.jsxs)("label",{className:"block text-sm",children:["Email",(0,b.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"email",value:h,onChange:a=>i(a.target.value),required:!0,autoComplete:"email"})]}),(0,b.jsxs)("label",{className:"block text-sm",children:["Password",(0,b.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"password",value:j,onChange:a=>k(a.target.value),required:!0,autoComplete:"current-password"})]}),(0,b.jsx)("button",{type:"submit",disabled:l,className:"w-full rounded-full px-4 py-2 text-sm font-semibold disabled:opacity-70",style:{background:"var(--bat-accent)",color:"white"},children:l?"Logging in...":"Log in"})]}),(0,b.jsxs)("p",{className:"mt-4 text-sm",style:{color:"var(--bat-text-muted)"},children:["No account? ",(0,b.jsx)(c.default,{href:"/signup",children:"Create one"})]})]})})}a.s(["LoginPageClient",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__26df2b5c._.js.map