module.exports=[66338,a=>{"use strict";async function b(a){let b=await a.json().catch(()=>({}));if(!a.ok)throw Error("string"==typeof b?.error?b.error:"string"==typeof b?.details?b.details:`Request failed (${a.status})`);return b}async function c(){let a=await fetch("/api/portal/workspaces",{method:"GET",cache:"no-store",credentials:"include"}),c=await b(a);return Array.isArray(c)?c:Array.isArray(c?.workspaces)?c.workspaces:Array.isArray(c?.jobs)?c.jobs:[]}async function d(a){return b(await fetch(`/api/portal/workspaces/${a}/intake`,{method:"GET",cache:"no-store",credentials:"include"}))}async function e(a,c){return b(await fetch(`/api/portal/workspaces/${a}/intake/suggest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c),credentials:"include"}))}async function f(a,c){return b(await fetch(`/api/portal/workspaces/${a}/intake`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c),credentials:"include"}))}async function g(a){let c=await fetch(`/api/research-jobs/${a}/runtime/threads`,{method:"GET",cache:"no-store",credentials:"include"}),d=await b(c);return Array.isArray(d.threads)?d.threads:[]}async function h(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/threads`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c),credentials:"include"}))}async function i(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/threads/${c}/branches`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(d),credentials:"include"}))}async function j(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/threads/${c}/pin-branch`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({branchId:d}),credentials:"include"}))}async function k(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/messages?limit=300`,{method:"GET",cache:"no-store",credentials:"include"}))}async function l(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/events?limit=150`,{method:"GET",cache:"no-store",credentials:"include"}))}async function m(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/queue`,{method:"GET",cache:"no-store",credentials:"include"}))}async function n(a,c){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/state`,{method:"GET",cache:"no-store",credentials:"include"}))}async function o(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/messages`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(d),credentials:"include"}))}async function p(a,c,d="Interrupted by user"){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/interrupt`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reason:d}),credentials:"include"}))}async function q(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/queue/reorder`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:d}),credentials:"include"}))}async function r(a,c,d){return b(await fetch(`/api/research-jobs/${a}/runtime/branches/${c}/queue/${d}`,{method:"DELETE",credentials:"include"}))}a.s(["cancelRuntimeQueueItem",()=>r,"createRuntimeBranch",()=>i,"createRuntimeThread",()=>h,"fetchRuntimeBranchState",()=>n,"fetchWorkspaceIntakeStatus",()=>d,"fetchWorkspaces",()=>c,"interruptRuntimeBranch",()=>p,"listRuntimeEvents",()=>l,"listRuntimeMessages",()=>k,"listRuntimeQueue",()=>m,"listRuntimeThreads",()=>g,"pinRuntimeBranch",()=>j,"reorderRuntimeQueue",()=>q,"sendRuntimeMessage",()=>o,"submitWorkspaceIntake",()=>f,"suggestWorkspaceIntakeCompletion",()=>e])},43519,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(66338);function f(){let[a,f]=(0,d.useState)(!0),[g,h]=(0,d.useState)(null),[i,j]=(0,d.useState)([]),k=(0,d.useCallback)(async()=>{f(!0),h(null);try{let a=await (0,e.fetchWorkspaces)();j(a)}catch(a){h(String(a?.message||"Failed to fetch workspaces"))}finally{f(!1)}},[]);(0,d.useEffect)(()=>{k()},[k]);let l=(0,d.useMemo)(()=>i.map(a=>({...a,label:a.client?.name?.trim()||`Workspace ${a.id.slice(0,8)}`})),[i]);return(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Admin â€¢ Workspaces"}),g?(0,b.jsxs)("div",{className:"rounded-2xl border p-4 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:[(0,b.jsx)("p",{children:g}),(0,b.jsx)("button",{type:"button",onClick:k,className:"mt-2 rounded-full border px-3 py-1 text-xs",style:{borderColor:"currentColor"},children:"Retry"})]}):null,(0,b.jsxs)("div",{className:"space-y-2",children:[a&&0===l.length?(0,b.jsx)("article",{className:"bat-surface p-4 text-sm",style:{color:"var(--bat-text-muted)"},children:"Loading workspaces..."}):null,a||0!==l.length?null:(0,b.jsx)("article",{className:"bat-surface p-4 text-sm",style:{color:"var(--bat-text-muted)"},children:"No workspaces found."}),l.map(a=>(0,b.jsxs)(c.default,{href:`/admin/workspaces/${a.id}`,className:"bat-surface flex items-center justify-between p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.label}),(0,b.jsxs)("p",{className:"text-sm",style:{color:"var(--bat-text-muted)"},children:["Status: ",a.status||"UNKNOWN"]})]}),(0,b.jsx)("p",{className:"text-sm",style:{color:"var(--bat-accent)"},children:"Open"})]},a.id))]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=apps_client-portal_src_e2bc8e60._.js.map