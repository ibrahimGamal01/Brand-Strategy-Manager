(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},76695,e=>{"use strict";async function t(e){let t=await e.json().catch(()=>({}));if(!e.ok)throw Error("string"==typeof t?.error?t.error:"string"==typeof t?.details?t.details:`Request failed (${e.status})`);return t}async function a(e){return t(await fetch("/api/portal/auth/signup",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(e)}))}async function r(e){return t(await fetch("/api/portal/auth/login",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(e)}))}async function l(){return t(await fetch("/api/portal/auth/logout",{method:"POST",credentials:"include"}))}async function s(){return t(await fetch("/api/portal/auth/me",{method:"GET",credentials:"include",cache:"no-store"}))}async function o(e){return t(await fetch(`/api/portal/auth/verify-email?token=${encodeURIComponent(e)}`,{method:"GET",credentials:"include",cache:"no-store"}))}e.s(["getPortalMe",()=>s,"loginPortal",()=>r,"logoutPortal",()=>l,"signupPortal",()=>a,"verifyPortalEmail",()=>o])},42065,e=>{"use strict";var t=e.i(43476),a=e.i(22016),r=e.i(71645),l=e.i(18566),s=e.i(76695);function o(){let e=(0,l.useRouter)(),o=(0,l.useSearchParams)(),[n,i]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(!0),y=o.get("next")||"/app",x=o.get("verified");(0,r.useEffect)(()=>{let t=!0;return(0,s.getPortalMe)().then(()=>{t&&e.replace("/app")}).catch(()=>void 0).finally(()=>{t&&b(!1)}),()=>{t=!1}},[e]);let g=async t=>{t.preventDefault(),h(null),m(!0);try{await (0,s.loginPortal)({email:n,password:c}),e.push(y)}catch(t){let e=String(t?.message||"Login failed");e.includes("INVALID_CREDENTIALS")?h("Invalid email or password."):h(e)}finally{m(!1)}};return f?(0,t.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,t.jsx)("div",{className:"bat-surface w-full max-w-md p-7 text-sm",style:{color:"var(--bat-text-muted)"},children:"Checking session..."})}):(0,t.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,t.jsxs)("div",{className:"bat-surface w-full max-w-md p-7",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Log in to BAT"}),(0,t.jsx)("p",{className:"mt-2 text-sm",style:{color:"var(--bat-text-muted)"},children:"Continue to your workspaces and live activity stream."}),x?(0,t.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"var(--bat-border)",background:"var(--bat-surface-muted)"},children:"Your email is verified. You can log in now."}):null,p?(0,t.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:p}):null,(0,t.jsxs)("form",{className:"mt-6 space-y-3",onSubmit:g,children:[(0,t.jsxs)("label",{className:"block text-sm",children:["Email",(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"email",value:n,onChange:e=>i(e.target.value),required:!0,autoComplete:"email"})]}),(0,t.jsxs)("label",{className:"block text-sm",children:["Password",(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"password",value:c,onChange:e=>u(e.target.value),required:!0,autoComplete:"current-password"})]}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"w-full rounded-full px-4 py-2 text-sm font-semibold disabled:opacity-70",style:{background:"var(--bat-accent)",color:"white"},children:d?"Logging in...":"Log in"})]}),(0,t.jsxs)("p",{className:"mt-4 text-sm",style:{color:"var(--bat-text-muted)"},children:["No account? ",(0,t.jsx)(a.default,{href:"/signup",children:"Create one"})]})]})})}e.s(["LoginPageClient",()=>o])}]);