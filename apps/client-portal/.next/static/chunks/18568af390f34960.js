(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26160,e=>{"use strict";async function t(e){let t=await e.json().catch(()=>({}));if(!e.ok)throw Error("string"==typeof t?.error?t.error:"string"==typeof t?.details?t.details:`Request failed (${e.status})`);return t}async function a(){let e=await fetch("/api/portal/workspaces",{method:"GET",cache:"no-store",credentials:"include"}),a=await t(e);return Array.isArray(a)?a:Array.isArray(a?.workspaces)?a.workspaces:Array.isArray(a?.jobs)?a.jobs:[]}async function s(e){return t(await fetch(`/api/portal/workspaces/${e}/intake`,{method:"GET",cache:"no-store",credentials:"include"}))}async function r(e,a){return t(await fetch(`/api/portal/workspaces/${e}/intake/suggest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include"}))}async function n(e,a){return t(await fetch(`/api/portal/workspaces/${e}/intake`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include"}))}async function c(e){let a=await fetch(`/api/research-jobs/${e}/runtime/threads`,{method:"GET",cache:"no-store",credentials:"include"}),s=await t(a);return Array.isArray(s.threads)?s.threads:[]}async function i(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/threads`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include"}))}async function o(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/threads/${a}/branches`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s),credentials:"include"}))}async function l(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/threads/${a}/pin-branch`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({branchId:s}),credentials:"include"}))}async function u(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/messages?limit=300`,{method:"GET",cache:"no-store",credentials:"include"}))}async function d(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/events?limit=150`,{method:"GET",cache:"no-store",credentials:"include"}))}async function h(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/queue`,{method:"GET",cache:"no-store",credentials:"include"}))}async function p(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/state`,{method:"GET",cache:"no-store",credentials:"include"}))}async function m(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/messages`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s),credentials:"include"}))}async function f(e,a,s="Interrupted by user"){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/interrupt`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reason:s}),credentials:"include"}))}async function y(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/queue/reorder`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:s}),credentials:"include"}))}async function b(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/queue/${s}`,{method:"DELETE",credentials:"include"}))}e.s(["cancelRuntimeQueueItem",()=>b,"createRuntimeBranch",()=>o,"createRuntimeThread",()=>i,"fetchRuntimeBranchState",()=>p,"fetchWorkspaceIntakeStatus",()=>s,"fetchWorkspaces",()=>a,"interruptRuntimeBranch",()=>f,"listRuntimeEvents",()=>d,"listRuntimeMessages",()=>u,"listRuntimeQueue",()=>h,"listRuntimeThreads",()=>c,"pinRuntimeBranch",()=>l,"reorderRuntimeQueue",()=>y,"sendRuntimeMessage",()=>m,"submitWorkspaceIntake",()=>n,"suggestWorkspaceIntakeCompletion",()=>r])},27994,e=>{"use strict";var t=e.i(43476),a=e.i(22016),s=e.i(71645),r=e.i(26160);function n(){let[e,n]=(0,s.useState)(!0),[c,i]=(0,s.useState)(null),[o,l]=(0,s.useState)([]),u=(0,s.useCallback)(async()=>{n(!0),i(null);try{let e=await (0,r.fetchWorkspaces)();l(e)}catch(e){i(String(e?.message||"Failed to fetch workspaces"))}finally{n(!1)}},[]);(0,s.useEffect)(()=>{u()},[u]);let d=(0,s.useMemo)(()=>o.map(e=>({...e,label:e.client?.name?.trim()||`Workspace ${e.id.slice(0,8)}`})),[o]);return(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Admin â€¢ Workspaces"}),c?(0,t.jsxs)("div",{className:"rounded-2xl border p-4 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:[(0,t.jsx)("p",{children:c}),(0,t.jsx)("button",{type:"button",onClick:u,className:"mt-2 rounded-full border px-3 py-1 text-xs",style:{borderColor:"currentColor"},children:"Retry"})]}):null,(0,t.jsxs)("div",{className:"space-y-2",children:[e&&0===d.length?(0,t.jsx)("article",{className:"bat-surface p-4 text-sm",style:{color:"var(--bat-text-muted)"},children:"Loading workspaces..."}):null,e||0!==d.length?null:(0,t.jsx)("article",{className:"bat-surface p-4 text-sm",style:{color:"var(--bat-text-muted)"},children:"No workspaces found."}),d.map(e=>(0,t.jsxs)(a.default,{href:`/admin/workspaces/${e.id}`,className:"bat-surface flex items-center justify-between p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:e.label}),(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--bat-text-muted)"},children:["Status: ",e.status||"UNKNOWN"]})]}),(0,t.jsx)("p",{className:"text-sm",style:{color:"var(--bat-accent)"},children:"Open"})]},e.id))]})]})}e.s(["default",()=>n])}]);