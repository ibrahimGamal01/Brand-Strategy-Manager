(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26160,e=>{"use strict";async function t(e){let t=await e.json().catch(()=>({}));if(!e.ok)throw Error("string"==typeof t?.error?t.error:"string"==typeof t?.details?t.details:`Request failed (${e.status})`);return t}async function a(){let e=await fetch("/api/portal/workspaces",{method:"GET",cache:"no-store",credentials:"include"}),a=await t(e);return Array.isArray(a)?a:Array.isArray(a?.workspaces)?a.workspaces:Array.isArray(a?.jobs)?a.jobs:[]}async function s(e){return t(await fetch(`/api/portal/workspaces/${e}/intake`,{method:"GET",cache:"no-store",credentials:"include"}))}async function r(e,a){return t(await fetch(`/api/portal/workspaces/${e}/intake/suggest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include"}))}async function n(e,a){return t(await fetch(`/api/portal/workspaces/${e}/intake`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include"}))}async function c(e){let a=await fetch(`/api/research-jobs/${e}/runtime/threads`,{method:"GET",cache:"no-store",credentials:"include"}),s=await t(a);return Array.isArray(s.threads)?s.threads:[]}async function i(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/threads`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include"}))}async function o(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/threads/${a}/branches`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s),credentials:"include"}))}async function l(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/threads/${a}/pin-branch`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({branchId:s}),credentials:"include"}))}async function u(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/messages?limit=300`,{method:"GET",cache:"no-store",credentials:"include"}))}async function d(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/events?limit=150`,{method:"GET",cache:"no-store",credentials:"include"}))}async function h(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/queue`,{method:"GET",cache:"no-store",credentials:"include"}))}async function p(e,a){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/state`,{method:"GET",cache:"no-store",credentials:"include"}))}async function m(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/messages`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s),credentials:"include"}))}async function y(e,a,s="Interrupted by user"){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/interrupt`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({reason:s}),credentials:"include"}))}async function f(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/queue/reorder`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:s}),credentials:"include"}))}async function b(e,a,s){return t(await fetch(`/api/research-jobs/${e}/runtime/branches/${a}/queue/${s}`,{method:"DELETE",credentials:"include"}))}e.s(["cancelRuntimeQueueItem",()=>b,"createRuntimeBranch",()=>o,"createRuntimeThread",()=>i,"fetchRuntimeBranchState",()=>p,"fetchWorkspaceIntakeStatus",()=>s,"fetchWorkspaces",()=>a,"interruptRuntimeBranch",()=>y,"listRuntimeEvents",()=>d,"listRuntimeMessages",()=>u,"listRuntimeQueue",()=>h,"listRuntimeThreads",()=>c,"pinRuntimeBranch",()=>l,"reorderRuntimeQueue",()=>f,"sendRuntimeMessage",()=>m,"submitWorkspaceIntake",()=>n,"suggestWorkspaceIntakeCompletion",()=>r])},76944,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(22016);function r({workspaces:e,loading:a=!1,error:r=null,onRetry:n}){return(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"bat-chip",children:"Workspace switcher"}),(0,t.jsx)("h1",{className:"mt-3 text-3xl md:text-4xl",style:{fontFamily:"var(--font-display)"},children:"Choose a client workspace"}),(0,t.jsx)("p",{className:"mt-2 text-sm",style:{color:"var(--bat-text-muted)"},children:"Chat is the default route after workspace selection."})]}),r?(0,t.jsxs)("div",{className:"rounded-2xl border p-4 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:[(0,t.jsxs)("p",{children:["Could not load workspaces: ",r]}),n?(0,t.jsx)("button",{type:"button",onClick:n,className:"mt-2 rounded-full border px-3 py-1.5 text-xs",style:{borderColor:"currentColor"},children:"Retry"}):null]}):null,(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[a&&0===e.length?(0,t.jsx)("article",{className:"bat-surface p-5",children:(0,t.jsx)("p",{className:"text-sm",style:{color:"var(--bat-text-muted)"},children:"Loading workspaces..."})}):null,a||0!==e.length?null:(0,t.jsx)("article",{className:"bat-surface p-5",children:(0,t.jsx)("p",{className:"text-sm",style:{color:"var(--bat-text-muted)"},children:"No workspaces were found yet."})}),e.map(e=>(0,t.jsxs)(s.default,{href:`/app/w/${e.id}`,className:"bat-surface block p-5 transition-transform hover:-translate-y-0.5",children:[(0,t.jsx)("p",{className:"text-lg font-semibold",children:e.name}),(0,t.jsxs)("p",{className:"mt-1 text-sm",style:{color:"var(--bat-text-muted)"},children:[e.members," members • ",e.plan]}),e.intakeReady?null:(0,t.jsx)("p",{className:"mt-2 text-xs uppercase tracking-[0.07em]",style:{color:"var(--bat-warning)"},children:"Setup needed before smart chat"}),e.status?(0,t.jsxs)("p",{className:"mt-1 text-xs uppercase tracking-[0.07em]",style:{color:"var(--bat-text-muted)"},children:["Status: ",e.status]}):null,(0,t.jsx)("p",{className:"mt-3 text-sm",style:{color:"var(--bat-accent)"},children:"Open Chat Workspace →"})]},e.id))]})]})}var n=e.i(26160);function c(e){let t=e.client?.name?.trim()||`Workspace ${e.id.slice(0,8)}`,a=e.intakeReady?"Ready":"Setup required";return{id:e.id,name:t,members:1,plan:a,status:e.status||"UNKNOWN",startedAt:e.startedAt||null,intakeReady:e.intakeReady??!1}}function i(){let[e,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null),[l,u]=(0,a.useState)([]),d=(0,a.useCallback)(async()=>{s(!0),o(null);try{let e=await (0,n.fetchWorkspaces)();u(e)}catch(e){o(String(e?.message||"Failed to fetch workspaces"))}finally{s(!1)}},[]);(0,a.useEffect)(()=>{d()},[d]);let h=(0,a.useMemo)(()=>l.map(c),[l]);return(0,t.jsx)(r,{workspaces:h,loading:e,error:i,onRetry:d})}e.s(["default",()=>i],76944)}]);