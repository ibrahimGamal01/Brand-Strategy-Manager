(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},76695,e=>{"use strict";async function t(e){let t=await e.json().catch(()=>({}));if(!e.ok)throw Error("string"==typeof t?.error?t.error:"string"==typeof t?.details?t.details:`Request failed (${e.status})`);return t}async function a(e){return t(await fetch("/api/portal/auth/signup",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(e)}))}async function l(e){return t(await fetch("/api/portal/auth/login",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify(e)}))}async function r(){return t(await fetch("/api/portal/auth/logout",{method:"POST",credentials:"include"}))}async function s(){return t(await fetch("/api/portal/auth/me",{method:"GET",credentials:"include",cache:"no-store"}))}async function o(e){return t(await fetch(`/api/portal/auth/verify-email?token=${encodeURIComponent(e)}`,{method:"GET",credentials:"include",cache:"no-store"}))}e.s(["getPortalMe",()=>s,"loginPortal",()=>l,"logoutPortal",()=>r,"signupPortal",()=>a,"verifyPortalEmail",()=>o])},71981,e=>{"use strict";var t=e.i(43476),a=e.i(22016),l=e.i(71645),r=e.i(18566),s=e.i(76695);function o(){let e=(0,r.useRouter)(),[o,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[m,p]=(0,l.useState)(""),[h,b]=(0,l.useState)(!1),[f,x]=(0,l.useState)(null),[y,g]=(0,l.useState)(!0),[v,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{let t=!0;return(0,s.getPortalMe)().then(()=>{t&&e.replace("/app")}).catch(()=>void 0).finally(()=>{t&&g(!1)}),()=>{t=!1}},[e]);let j=async t=>{t.preventDefault(),x(null),w(null),b(!0);try{let t=await (0,s.signupPortal)({email:d,password:m,fullName:o,companyName:i});t.emailDelivery?.provider==="console"?w("Verification email is in console mode. Configure Resend to send real emails."):w("Verification email sent. Please confirm it from your inbox."),e.push("/app")}catch(t){let e=String(t?.message||"Sign up failed");e.includes("EMAIL_ALREADY_EXISTS")?x("An account with this email already exists."):e.includes("INVALID_EMAIL")?x("Please enter a valid email."):e.includes("INVALID_PASSWORD")?x("Password must be at least 8 characters."):x(e)}finally{b(!1)}};return y?(0,t.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,t.jsx)("div",{className:"bat-surface w-full max-w-md p-7 text-sm",style:{color:"var(--bat-text-muted)"},children:"Checking session..."})}):(0,t.jsx)("section",{className:"bat-shell grid min-h-[70vh] place-items-center py-12",children:(0,t.jsxs)("div",{className:"bat-surface w-full max-w-md p-7",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Create your BAT workspace"}),(0,t.jsx)("p",{className:"mt-2 text-sm",style:{color:"var(--bat-text-muted)"},children:"Start free and launch onboarding directly in chat."}),f?(0,t.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"#f4b8b4",background:"#fff5f4",color:"#9f2317"},children:f}):null,v?(0,t.jsx)("p",{className:"mt-3 rounded-xl border px-3 py-2 text-sm",style:{borderColor:"var(--bat-border)",background:"var(--bat-surface-muted)"},children:v}):null,(0,t.jsxs)("form",{className:"mt-6 space-y-3",onSubmit:j,children:[(0,t.jsxs)("label",{className:"block text-sm",children:["Full name",(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"text",value:o,onChange:e=>n(e.target.value),autoComplete:"name"})]}),(0,t.jsxs)("label",{className:"block text-sm",children:["Work email",(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"email",value:d,onChange:e=>u(e.target.value),required:!0,autoComplete:"email"})]}),(0,t.jsxs)("label",{className:"block text-sm",children:["Company name",(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"text",value:i,onChange:e=>c(e.target.value),autoComplete:"organization"})]}),(0,t.jsxs)("label",{className:"block text-sm",children:["Password",(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border px-3 py-2",style:{borderColor:"var(--bat-border)"},type:"password",value:m,onChange:e=>p(e.target.value),required:!0,autoComplete:"new-password",minLength:8})]}),(0,t.jsx)("button",{type:"submit",disabled:h,className:"w-full rounded-full px-4 py-2 text-sm font-semibold disabled:opacity-70",style:{background:"var(--bat-accent)",color:"white"},children:h?"Creating workspace...":"Create workspace"})]}),(0,t.jsxs)("p",{className:"mt-4 text-sm",style:{color:"var(--bat-text-muted)"},children:["Already onboarded? ",(0,t.jsx)(a.default,{href:"/login",children:"Log in"})]})]})})}e.s(["default",()=>o])}]);